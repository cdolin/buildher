<!DOCTYPE html>
<html>
<head>
	
	<title>Quick Start - Leaflet</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

	<link rel="stylesheet" href="styles.css">



	
</head>
<body>

<header>
   <h1 align="center">Biking in Chicago</h1>
</header>

<div id="paragraph">
	<p align = "center" class="info">
		Biking is a great way to increase strength, endurance, and coordination. It can help someone lose weight and increase cardiovascular fitness.
	</p>
	<p align = "center" class="info">
		It is also a pleasant and inexpensive way to commute in the warmer months and a fun way to explore one's neighborhood.
	</p>
	<p align = "center" class="info">
		But bikers need access to safe bike routes and convenient bike racks.
		So is biking really an available option for everyone in Chicago?
	</p>
</div>


<div class="optionsArea">
	<div class = "options">Bike Routes:</div><input type="checkbox" id="routeCheck" checked>
	<div class = "options">Income Map:</div><input type="checkbox" id="incomeCheck">
</div>
<div id="mapid" class="maps" style="width: 630px; height: 630px;"></div>



<script>

	var bikeroutemap = L.map('mapid').setView([41.85, -87.63], 11);

	var tl = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2RvbGluIiwiYSI6ImNqMThvdHNhaTA3OWszMnFxOGRjcWZxeXUifQ.Rg_AcpJ7QKxnCwSpYy7spQ', {
		maxZoom: 18,
		minZoom: 9,
		attribution: '',
		id: 'mapbox.streets'
	})

	tl.addTo(bikeroutemap);


	function heatMapColorforValue(value){
		value = (value-5000)/190000
  		var h = (value) * 240
  		return "hsl(" + h + ", 100%, 50%)";
	}

	var income = new L.geoJson(null, {
		style: function(feature){
			return {weight: 0.5, opacity : 0.5, color: heatMapColorforValue(feature.properties.B19013001)}
		}
	})


	$.ajax({
		dataType: "json",
		async: false,
		url: "income_filtered.geojson",
		success: function(data) {
    		$(data.features).each(function(key, data) {
        		income.addData(data);
   			});
		}
	})

	var bike_routes = new L.geoJson(null, {
		style: function(feature){
			return {weight: 1, opacity: 1, color: "#000000"}
		}
	})

	$.ajax({
		dataType: "json",
		url: "bikeroutes.geojson",
		success: function(data) {
    		$(data.features).each(function(key, data) {
        		bike_routes.addData(data);
   			});
		}
	})

	bike_routes.addTo(bikeroutemap)

	$('#routeCheck').mousedown(function() {
    	if (!$(this).is(':checked')) {
        	bike_routes.addTo(bikeroutemap)
    	}
    	if ($(this).is(':checked')) {
    		bikeroutemap.removeLayer(bike_routes)
    	}
	});

	$('#incomeCheck').mousedown(function() {
    	if (!$(this).is(':checked')) {
        	income.addTo(bikeroutemap)
        	income.bringToBack()
    	}
    	if ($(this).is(':checked')) {
    		bikeroutemap.removeLayer(income)
    	}
	});


/*
	income.addTo(bikeroutemap)
	bike_routes.addTo(bikeroutemap)
*/

</script>



</body>
</html>